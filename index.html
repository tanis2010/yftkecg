<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <!-- 引入 ECharts 文件 -->
    <script src="echarts.common.min.js"></script>
</head>
<body>
    <!-- 为ECharts准备一个具备大小（宽高）的Dom -->
    <div id="main" style="width: 800px;height:400px;"></div>
    <div id="text"></div>
    <script type="text/javascript">
        // 基于准备好的dom，初始化echarts实例
        var myChart = echarts.init(document.getElementById('main'));

        function randomData() {
    now = new Date(+now + 10);
    value = Math.random() * 21 - 10;
    return {
        name: now.toString(),
        value: [
            now,
            Math.round(value)
        ]
    }
}

var currid = 0;
var starttime = +new Date();
function setData() {
    now = new Date(+starttime + currid*1000/128);
    currid++;
    var value=(newdata[currid%newdata.length] - 2048) /4096 * 3.3;
    return {
        name: now.toString(),
        value: [
            now,
            value
        ]
    }
}

var newdata = [1997,2007,2013,2014,2019,2021,2028,2039,2048,2063,2075,2080,2086,2088,2095,2111,2129,2154,2177,2186,2200,2219,2237,2254,2258,2258,2242,2194,2130,2077,2048,2024,2000,1984,1977,1977,1981,1984,1985,1995,2003,2009,2019,2019,2018,2027,2028,2029,2031,2034,2041,2037,2038,2044,2050,2048,2042,2040,2046,2044,2030,2030,2035,2040,2041,2043,2051,2055,2056,2051,2046,2046,2052,2060,2059,2054,2048,2047,2052,2059,2057,2053,2056,2060,2068,2077,2095,2110,2104,2087,2079,2073,2066,2059,2052,2050,2050,2053,2046,2044,2052,2048,1980,1900,1990,2377,3007,3175,2530,1939,1878,1975,1993,1992,1997,1998,2000,2007,2014,2018,2026,2035,2038,2052,2064,2066,2081,2099,2102,2107,2111,2121,2139,2158,2173,2188,2206,2232,2263,2277,2287,2299,2310,2319,2318,2297,2248,2188,2131,2085,2054,2034,2021,2013,2012,2019,2023,2026,2032,2036,2042,2052,2049,2043,2044,2043,2039,2040,2045,2047,2038,2031,2033,2033,2038,2045,2046,2053,2062,2055,2048,2045,2047,2051,2056,2061,2058,2051,2052,2052,2052,2054,2053,2050,2055,2055,2043,2040,2041,2038,2046,2060,2059,2068,2083,2080,2068,2063,2053,2036,2025,2017,2011,2009,2007,2003,2007,2010,1998,1925,1835,1924,2349,3028,3182,2502,1946,1906,1965,1964,1956,1956,1954,1960,1966,1975,1981,1984,1979,1987,2004,2019,2032,2039,2050,2061,2073,2091,2103,2115,2137,2163,2177,2187,2207,2224,2236,2256,2280,2303,2322,2315,2293,2259,2206,2157,2115,2086,2070,2052,2037,2034,2040,2050,2048,2041,2046,2054,2050,2049,2051,2054,2048,2045,2041,2036,2042,2047,2053,2055,2054,2042,2038,2039,2038,2046,2041,2031,2023,2018,2025,2031,2033,2032,2029,2026,2023,2029,2033,2031,2038,2042,2046,2043,2047,2052,2050,2065,2080,2086,2099,2108,2106,2101,2095,2088,2078,2070,2069,2069,2079,2074,2072,2075,2065,2050,1969,1871,1958,2366,3056,3213,2535,1979,1920,1988,1994,1981,1974,1972,1976,1978,1982,1989,1996,2007,2020,2028,2036,2044,2040,2036,2044,2057,2064,2069,2078,2091,2112,2130,2137,2150,2171,2187,2196,2215,2232,2244,2248,2231,2199,2158,2108,2068,2050,2027,2010,2007,2015,2017,2022,2031,2036,2043,2039,2028,2030,2046,2056,2057,2051,2047,2053,2050,2040,2035,2035,2039,2039,2043,2055,2060,2058,2053,2048,2044,2044,2052,2057,2053,2056,2053,2043,2038,2044,2052,2057,2052,2049,2059,2058,2064,2082,2085,2072,2066,2061,2047,2028,2019,2020,2016,2013,2010,2012,2019,2019,1987,1902,1894,2171,2753,3206,2823,2081,1833,1904,1974,1988,1991,1999,2006,2009,2016,2023,2023,2027,2048,2048,2048,2061,2071,2073,2076,2082,2086,2094,2100,2110,2123,2136,2148,2169,2181,2200,2219,2223,2232,2242,2257,2248,2219,2174,2140,2101,2071,2043,2017,2004,2007,2016,2012,2002,2006,2015,2018,2021,2016,2005,2015,2035,2035,2026,2020,2019,2024,2028,2022,2025,2026,2021,2028,2029,2027,2020,2023,2041,2048,2048,2048,2055,2064,2065,2066,2067,2076,2091,2096,2087,2107,2125,2109,2098,2094,2079,2068,2059,2051,2051,2051,2055,2059,2055,2053,2052,2022,1933,1901,2118,2627,3118,2863,2136,1827,1882,1965,1972,1967,1977,1986,1993,2005,2015,2020,2022,2025,2028,2035,2041,2046,2051,2056,2062,2074,2081,2088,2103,2113,2118,2131,2152,2165,2172,2181,2199,2219,2228,2229,2221,2195,2156,2114,2074,2044,2018,1997,1992,1995,2002,2013,2017,2020,2030,2034,2036,2046,2048,2043,2048,2055,2056,2060,2065,2061,2058,2063,2069,2068,2065,2063,2067,2078,2075,2062,2046,2051,2060,2059,2055,2045,2045,2040,2027,2033,2043,2048,2061,2076,2074,2057,2048,2045,2032,2034,2039,2038,2035,2037,2043,2041,2044,2037,1954,1887,2022,2448,3046,3049,2348,1874,1866,1953,1980,1986,1986,1986,1990,1993,2002,2015,2017,2014,2020,2033,2046,2053,2064,2069,2073,2084,2097,2113,2129,2140,2151,2172,2184,2195,2213,2228,2239,2251,2256,2273,2278,2254,2215,2164,2120,2087,2064,2049,2035,2023,2016,2025,2029,2026,2032,2032,2027,2030,2034,2038,2042,2039,2036,2047,2048,2043,2043,2044,2047,2048,2046,2054,2054,2044,2042,2040,2043,2051,2057,2051,2048,2050,2050,2058,2057,2060,2077,2085,2078,2090,2109,2098,2084,2083,2071,2053,2046,2043,2038,2030,2026,2023,2022,2017,1970,1872,1849,2099,2674,3172,2846,2088,1827,1901,1957,1951,1939,1943,1964,1981,1996,2016,2027,2027,2036,2048,2060,2069,2087,2096,2099,2098,2098,2104,2121,2140,2147,2158,2171,2192,2210,2226,2239,2247,2256,2268,2267,2251,2219,2171,2119,2070,2032,2013,2002,1997,1997,1996,2004,2014,2021,2027,2028,2029,2036,2036,2033,2033,2037,2046,2050,2049,2047,2053,2059,2054,2053,2055,2053,2056,2060,2053,2042,2040,2036,2035,2038,2036,2032,2036,2047,2054,2066,2073,2073,2089,2098,2092,2092,2077,2057,2054,2041,2032,2030,2023,2023,2026,2017,2000,1928,1860,1999,2439,3049,3067,2359,1870,1857,1950,1976,1982,1994,2005,2010,2013,2024,2034,2043,2053,2063,2076,2081,2082,2093,2105,2118,2128,2139,2148,2153,2161,2171,2179,2192,2210,2221,2222,2231,2249,2258,2258,2248,2217,2171,2123,2083,2051,2026,2018,2017,2013,2017,2023,2025,2025,2029,2034,2039,2045,2048,2046,2046,2050,2049,2046,2041,2041,2046,2047,2047,2044,2042,2045,2047,2044,2044,2041,2038,2048,2053,2042,2040,2049,2056,2072,2083,2086,2099,2106,2097,2088,2078,2066,2060,2054,2048,2043,2047,2051,2042,2039,2042,1988,1903,1959,2290,2866,3111,2552,1915,1818,1933,1987,1992,1990,1990,1990,2000,2017,2025,2026,2028,2039,2046,2050,2059,2065,2073,2083,2087,2096,2111,2123,2134,2142,2151,2162,2182,2200,2207,2224,2237,2248,2260,2244,2207,2167,2117,2077,2045,2016,2004,1998,1999,2004,2002,2004,2011,2021,2028,2032,2039,2043,2044,2048,2050,2050,2051,2054,2057,2061,2059,2047,2051,2055,2052,2054,2048,2046,2044,2043,2047,2048,2037,2033,2041,2048,2056,2060,2070,2076,2078,2082,2068,2066,2063,2041,2028,2030,2029,2026,2023,2022,2027,2032,2034,1976,1884,1935,2276,2888,3142,2568,1942,1852,1958,1996,1993,1991,2002,2013,2016,2025,2029,2029,2039,2051,2068,2068,2067,2076,2087,2100,2110,2125,2133,2139,2155,2166,2169,2183,2200,2228,2246,2256,2267,2282,2288,2274,2245,2199,2142,2096,2066,2045,2037,1980,1964,2024,2034,2038,2045,2046,2048,2050,2046,2043,2044,2037,2032,2034,2035,2035,2036,2044,2045,2042,2045,2047,2047,2046,2045,2043,2043,2040,2043,2050,2050,2049,2046,2044,2044,2045,2048,2057,2070,2079,2093,2105,2101,2087,2085,2081,2067,2063,2066,2066,2066,2062,2058,2058,2058,2041,1958,1864,1970,2404,3028,3071,2377,1895,1888,1965,1974,1968,1969,1970,1971,1974,1971,1969,1967,1978,1991,1994,2001,2011,2026,2039,2056,2063,2073,2090,2104,2117,2135,2156,2175,2187,2202,2221,2239,2258,2264,2265,2251,2215,2170,2123,2078,2046,2027,2019,2015,2009,2008,2012,2015,2018,2013,2019,2028,2030,2035,2037,2040,2041,2036,2039,2041,2040,2035,2036,2049,2052,2047,2045,2046,2041,2044,2052,2056,2056,2054,2060,2059,2057,2061,2054,2055,2062,2069,2079,2086,2090,2106,2114,2097,2087,2077,2067,2055,2040,2036,2041,2042,2043,2044,2046,2045,2012,1921,1863,2061,2599,3169,2977,2240,1925,1962,1995,1991,1989,1984,1984,1994,2000,2002,2008,2013,2014,2018,2026,2041,2054,2059,2058,2060,2071,2090,2101,2113,2121,2137,2164,2181,2190,2190,2201,2224,2242,2249,2244,2224,2182,2139,2098,2050,2014,1996,1983,1976,1981,1981,1981,1981,1980,1986,1992,1990,1992,1996,1995,1996,2005,2011,2015,2018,2025,2028,2022,2021,2023,2025,2021,2025,2035,2041,2044,2038,2043,2057,2068,2073,2071,2067,2069,2069,2071,2078,2086,2091,2102,2116,2108,2092,2078,2063,2054,2045,2042,2048,2052,2044,2039,2042,2049,2035,1965,1920,2100,2580,3117,2936,2183,1826,1885,1966,1978,1989,2001,2007,2010,2018,2024,2033,2042,2041,2047,2058,2067,2072,2079,2093,2100,2108,2127,2138,2147,2150,2155,2176,2199,2210,2222,2239,2255,2265,2271,2272,2254,2217,2177,2138,2099,2064,2045,2036,2030,2024,2019,2019,2024,2037,2041,2039,2048,2048,2048,2058,2054,2046,2047,2049,2049,2048,2048,2041,2035,2049,2050,2048,2044,2036,2039,2037,2038,2039,2040,2046,2041,2036,2046,2052,2053,2063,2073,2075,2091,2099,2082,2069,2062,2043,2034,2035,2027,2031,2045,2042,2033,2034,2033,1979,1897,1954,2295,2872,3089,2523,1918,1839,1953,1998,1998,1996,2004,2018,2015,2019,2032,2037,2038,2040,2046,2054,2064,2068,2067,2078,2087,2097,2116,2126,2142,2156,2171,2184,2194,2207,2223,2238,2247,2256,2260,2259,2236,2186,2140,2091,2050,2029,2015,2000,1996,1991,1988,1993,1997,2005,2015,2021,2024,2027,2026,2030,2028,2029,2033,2025,2011,2023,2036,2035,2040,2047,2045,2040,2045,2047,2044,2041,2043,2041,2045,2055,2060,2064,2064,2063,2067,2073,2086,2094,2100,2115,2113,2104,2101,2088,2074,2069,2068,2069,2069,2074,2080,2083,2078,2043,1959,1906,2078,2544,3086,2948,2216,1833,1870,1959,1967,1960,1959,1957,1965,1970,1968,1966,1958,1936,1929,1945,1953,1975,2000,2015,2047,2068,2082,2096,2107,2123,2142,2170,2200,2222,2240,2267,2288,2300,2308,2315,2305,2267,2220,2177,2135,2098,2079,2064,2053,2048,2043,2043,2045,2046,2045,2048,2050,2047,2044,2040,2038,2036,2039,2041,2034,2034,2037,2039,2037,2036,2035,2030,2032,2040,2043,2048,2045,2047,2050,2045,2054,2062,2061,2055,2050,2051,2058,2062,2059,2070,2095,2105,2091,2083,2085,2073,2056,2049,2044,2041,2038,2037,2045,2046,2037,2013,1928,1870,2058,2560,3131,2977,2227,1851,1892,1967,1976,1976,1977,1984,1989,1994,1999,2008,2014,2020,2030,2045,2052,2057,2068,2074,2082,2100,2112,2117,2131,2144,2155,2169,2188,2213,2234,2244,2246,2258,2264,2267,2255,2227,2179,2125,2082,2045,2020,2007,1998,1991,1984,1997,2013,2011,2009,2012,2015,2019,2019,2019,2022,2028,2031,2027,2029,2039,2049,2057,2057,2051,2049,2055,2059,2061,2055,2051,2044,2048,2058,2049,2045,2046,2043,2044,2048,2051,2056,2055,2059,2066,2074,2087,2098,2100,2088,2078,2071,2066,2060,2048,2040,2036,2033,2039,2048,2041,2034,1980,1888,1926,2268,2911,3230,2678,2001,1859,1948,1993,1990,1985,1995,2005,2013,2026,2031,2029,2031,2047,2054,2053,2062,2069,2075,2094,2098,2097,2111,2125,2134,2140,2159,2177,2185,2204,2216,2220,2238,2255,2262,2261,2240,2199,2154,2105,2070,2044,2027,2015,2004,2006,2008,2011,2012,2015,2021,2022,2023,2026,2031,2033,2031,2031,2036,2036,2034,2033,2030,2034,2039,2039,2040,2042,2041,2034,2035,2042,2045,2045,2057,2058,2053,2061,2064,2057,2057,2057,2057,2057,2072,2089,2090,2096,2109,2103,2090,2085,2066,2055,2056,2051,2043,2045,2049,2047,2046,2040,2033,1962,1896,2062,2516,3045,2914,2184,1827,1802,1861,1963,1990,1994,1996,2007,2021,2028,2031,2042,2047,2049,2051,2054,2060,2067,2070,2075,2084,2088,2097,2099,2095,2098,2104,2114,2120,2127,2135,2151,2172,2177,2195,2204,2191,2165,2118,2060,2013,1973,1945,1926,1915,1911,1915,1931,1945,1951,1961
];

var data = [];
var oneDay = 24 * 3600 * 1000;
var value = Math.random() * 1000;

for (var i = 0; i <= 128*5; i++) {
    data.push(setData(((newdata[currid] - 2048) /4096 * 3.3)));
}

var markline = [];
for(var i=20;i>=-20;i--){
    var currline = {};
    currline.yAxis = i/10;

    if( i%5 == 0){
        currline.lineStyle = {
            type:'solid',
            width:1
        };
    }
    if(i%10 ==0){
        currline.label={
            show:true,
            position:'start',
            color:'#000000'
        };
    }
    markline.push(currline);
}

for(var i=0;i<=128*5;i++){
    var currline = {};
    currline.xAxis = new Date(+starttime + i*8*1000/128);
    if(i%5==0)
    {
        currline.lineStyle = {
            type:'solid',
            width:1
        };
    }
    if(i%128 ==0){
        currline.label={
            show:true,
            position:'start',
            color:'#000000'
        };
    }
    markline.push(currline);
}

option = {
    title: {
        text: '动态数据 + 时间坐标轴'
    },
    tooltip: {
        trigger: 'axis',
        formatter: function (params) {
            params = params[0];
            var date = new Date(params.name);
            return date.getDate() + '/' + (date.getMonth() + 1) + '/' + date.getFullYear() + ' : ' + params.value[1];
        },
        axisPointer: {
            animation: false
        }
    },
    xAxis: {
        show:false,
        type: 'time',
        interval:1000,
        axisLine:{
            show:false,
            lineStyle:{
                width:2,
                color:'#ff0000'
            }
        },
        axisLabel:{
        },
        axisTick:{
            show:false
        }
    },
    yAxis: {
        show:false,
        max:2,
        min:-2,
        interval:1,
        type: 'value',
        axisLine:{
            show:false
        },
        axisTick:{
            show:false,
            interval:10
        }
    },
    series: [{
        name: '模拟数据',
        type: 'line',
        showSymbol: false,
        hoverAnimation: false,
        data: data,
        lineStyle:{
            type:'solid',
            width:1.5,
            color:'#000000'
        },
        markLine:{
            silent : true,
            label:{
                show:false,
                position:'start'
            },
            lineStyle:{
                type:'solid',
                width:.5
            },
            symbol:'none',                    
            data: markline
        }
    }],
    animation:false

};


setInterval(function () {

    for (var i = 0; i < 16; i++) {
        data.shift();
        data.push(setData(newdata[currid]));
        currid++;
    }
    //if(currid>newdata.length) currid=0;
    myChart.setOption({
        series: [{
            data: data
        }]
    });
}, 125);

        // 使用刚指定的配置项和数据显示图表。
        myChart.setOption(option);
    </script>
</body>


</html>